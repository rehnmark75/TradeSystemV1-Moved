{"type":"feature","title":"HTF Bias Score System v2.35.0 - Professional Redesign Implementation","content":"Implemented HTF Bias Score System replacing binary HTF alignment filter with continuous score (0.0-1.0).\n\nCore Components:\n1. htf_bias_calculator.py - Three-component scoring:\n   - Candle body direction/strength (40% weight)\n   - EMA slope (30% weight)\n   - MACD momentum (30% weight)\n\n2. Score Interpretation:\n   - 0.9-1.0: STRONG_ALIGNMENT (optimal)\n   - 0.7-0.9: ALIGNED (favorable)\n   - 0.5-0.7: NEUTRAL (no strong bias)\n   - 0.3-0.5: WEAK_COUNTER (slightly misaligned)\n   - 0.0-0.3: STRONG_COUNTER (significantly misaligned)\n\n3. Per-pair modes:\n   - 'active': Filter signals below threshold (default 0.4)\n   - 'monitor': Log scores without filtering\n   - 'disabled': Skip calculation entirely\n\n4. Confidence multiplier: Adjusts signal confidence 0.7x-1.3x based on bias score\n\nFiles Created/Modified:\n- NEW: worker/app/forex_scanner/core/strategies/helpers/htf_bias_calculator.py\n- NEW: worker/app/forex_scanner/migrations/add_htf_bias_score_config.sql\n- MODIFIED: worker/app/forex_scanner/services/smc_simple_config_service.py\n- MODIFIED: worker/app/forex_scanner/core/strategies/smc_simple_strategy.py\n\nDatabase Changes:\n- smc_simple_global_config: htf_bias_enabled, htf_bias_min_threshold, htf_bias_confidence_multiplier_enabled\n- smc_simple_pair_overrides: htf_bias_mode, htf_bias_min_threshold\n- alert_history: htf_bias_score, htf_bias_mode, htf_bias_details (JSONB)\n\nParameter Reduction: 8 old parameters â†’ 2 new parameters (htf_bias_enabled, htf_bias_min_threshold)","files":["worker/app/forex_scanner/core/strategies/helpers/htf_bias_calculator.py","worker/app/forex_scanner/core/strategies/smc_simple_strategy.py","worker/app/forex_scanner/services/smc_simple_config_service.py"],"tags":["htf-bias","strategy","filter","v2.35.0"]}
{"type":"discovery","title":"HTF Bias Filter Backtest Validation Results (7-day Scalp Mode)","content":"Comprehensive backtest validation of HTF Bias Score filter effectiveness:\n\nACTIVE MODE PAIRS (threshold=0.4):\n\nGBPUSD - FILTER BENEFICIAL:\n- WITH filter: 55 signals, 45.5% WR, 0.78 PF, -0.6 pips expectancy\n- WITHOUT filter: 61 signals, 42.6% WR, 0.73 PF, -0.8 pips expectancy\n- Impact: +2.9% WR, +0.05 PF, +0.2 pips (filter removes 6 bad signals)\n\nAUDUSD - FILTER HARMFUL (CHANGED TO MONITOR):\n- WITH filter: 79 signals, 53.2% WR, 1.11 PF, +0.3 pips expectancy\n- WITHOUT filter: 86 signals, 55.8% WR, 1.30 PF, +0.7 pips expectancy\n- Impact: -2.6% WR, -0.19 PF, -0.4 pips (filter removes GOOD signals!)\n- ACTION: Changed to 'monitor' mode\n\nNZDUSD - MIXED RESULTS:\n- WITH filter: 19 signals, 42.1% WR, 0.63 PF\n- WITHOUT filter: 25 signals, 40.0% WR, 0.73 PF\n- Impact: +2.1% WR but -0.10 PF (insufficient sample size)\n\nMONITOR MODE PAIRS (no filtering):\n- EURUSD: 81 signals, 55.6% WR, 1.13 PF, +0.3 pips\n- USDCAD: 21 signals, 52.4% WR, 1.48 PF, +1.1 pips (BEST)\n- USDJPY: 53 signals, 52.8% WR, 1.39 PF, +1.1 pips\n\nKEY FINDING: Monitor mode pairs (avg 53.6% WR) outperform active filtered pairs (avg 46.9% WR)","files":[],"tags":["backtest","htf-bias","validation","performance"]}
{"type":"decision","title":"HTF Bias Per-Pair Configuration Decision (Jan 2026)","content":"Final per-pair HTF Bias mode configuration based on backtest validation:\n\nMONITOR MODE (calculate/log scores, no filtering):\n- EURUSD: Collecting bias score data, already profitable\n- USDCAD: Best performer (1.48 PF), don't risk degrading\n- USDJPY: Strong performer (1.39 PF), collecting data\n- AUDUSD: Filter was HARMING performance (-0.19 PF), disabled filtering\n\nACTIVE MODE (filter signals below 0.4 threshold):\n- GBPUSD: Filter improves win rate by +2.9%\n- NZDUSD: Needs more data but kept active\n- AUDJPY, EURJPY, GBPJPY, USDCHF: Default active\n\nDatabase configuration:\nUPDATE smc_simple_pair_overrides SET htf_bias_mode = 'monitor' WHERE epic IN ('CS.D.EURUSD.CEEM.IP', 'CS.D.USDCAD.MINI.IP', 'CS.D.USDJPY.MINI.IP', 'CS.D.AUDUSD.MINI.IP');\n\nRATIONALE:\n1. Never harm profitable pairs with untested filters\n2. AUDUSD was the only profitable active-filtered pair, and filter degraded it\n3. Collect data on monitor pairs before enabling active filtering\n4. GBPUSD shows clear benefit from filtering (still unprofitable but less bad)","files":[],"tags":["config","htf-bias","decision","per-pair"]}
